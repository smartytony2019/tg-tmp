(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{608:function(t,e,r){"use strict";var n={props:{overflow:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},target:{type:String,default:""},category:{type:String,default:""},default:{type:String,default:""}},data:function(){return{width:0,left:0}},computed:{containerStyle:function(){return this.overflow?"date_select":"tab_select"},spanStyle:function(){return{width:"".concat(this.width,"px"),left:"".concat(this.left,"px")}}},watch:{target:{handler:function(t){var e=this;if(""===t)return this.width=0,void(this.left=0);this.$nextTick((function(){var t=document.querySelector(".select_tabs button.active");e.width=t.offsetWidth,e.left=t.offsetLeft,document.querySelector(".".concat(e.containerStyle)).scrollTo({left:e.left})}))},immediate:!0}},mounted:function(){this.$emit("update:target",this.default)},methods:{itemClick:function(t){this.category&&this.$dataAnalysis("".concat(this.category).concat(t)),t!==this.target&&this.$emit("update:target",t)}}},c=r(2),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.containerStyle},[r("div",{staticClass:"select_tabs"},[r("span",{style:t.spanStyle}),t._v(" "),t._l(t.items,(function(e){return r("button",{key:e.value,class:{active:e.value===t.target},on:{click:function(r){return t.itemClick(e.value)}}},[t._v("\n      "+t._s(e.label)+"\n    ")])}))],2)])}),[],!1,null,null,null);e.a=component.exports},777:function(t,e,r){"use strict";r.r(e);r(15),r(11),r(10),r(9),r(8),r(13),r(17);var n=r(3),c=(r(33),r(5)),o=r(7),header=r(101),l=r(608),v=(r(27),r(28),{props:{activity:{type:Object,default:function(){return{}}},applyStatus:{type:String,default:function(){return""}}},data:function(){return{open:!1,queryId:null,reviewStatus:{1:"审核中",2:"审核通过",3:"审核失败"}}},computed:{detail:function(){switch(this.applyStatus){case"process":return this.activity.detail.filter((function(t){return 1===t.applyStatus}));case"pass":return this.activity.detail.filter((function(t){return 2===t.applyStatus}));case"fail":return this.activity.detail.filter((function(t){return 3===t.applyStatus}));default:return[]}}},mounted:function(){var t=this,e=this.$route.query.activityId;e&&(this.queryId=e),this.queryId===this.activity.activityId.toString()&&setTimeout((function(){document.getElementById(t.$el.id).scrollIntoView()}),500)},methods:{more:function(){this.open=!this.open}}}),d=r(2),y=Object(d.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("div",{staticClass:"events_category"},[t._v(t._s(t.activity.categoryName))]),t._v(" "),r("div",{staticClass:"events_pic"},[-1===t.activity.mobileImg.lastIndexOf("mp4")?[r("img",{attrs:{src:t.activity.mobileImg}})]:[r("video",{attrs:{id:"process_video_"+t.activity.activityId,src:t.activity.mobileImg,autoplay:"",loop:"",playsinline:"",preload:"auto",muted:"muted"},domProps:{muted:!0}})]],2),t._v(" "),r("div",{staticClass:"events_info",class:{active:t.open}},[r("ul",t._l(t.detail,(function(e,n){return r("li",{key:e.applyId,class:{events_focus:0===n}},[r("div",{staticClass:"group"},[r("div",{staticClass:"info_row"},[r("span",[t._v("活动名称：")]),t._v(" "),r("b",[t._v(t._s(t.activity.activityName))])]),t._v(" "),r("div",{staticClass:"info_row"},[r("span",[t._v("申请时间：")]),t._v(" "),r("b",[t._v(t._s(e.createdTime))])]),t._v(" "),3!==e.applyStatus?r("div",{staticClass:"info_row"},[r("span",[t._v("进 度：")]),t._v(" "),r("b",{class:{progress:t.queryId===t.activity.activityId.toString()}},[t._v(t._s(t.reviewStatus[e.applyStatus]))])]):t._e(),t._v(" "),r("div",{staticClass:"info_row"},[r("span",[t._v("申请序号：")]),t._v(" "),r("b",[t._v(t._s(e.applyId))])]),t._v(" "),3===e.applyStatus?r("div",{staticClass:"info_row"},[r("span",[t._v("备 注：")]),t._v(" "),r("b",[t._v(t._s(""!==e.secondDeniedMsg?e.secondDeniedMsg:e.firstDeniedMsg))])]):t._e()])])})),0),t._v(" "),t.detail.length>1?r("button",{staticClass:"switch_btn",on:{click:t.more}}):t._e()])])}),[],!1,null,null,null).exports;function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={layout:"member",transition:"rightIn",components:{AppHeader:header.a,TabSelect:l.a,ApplyList:y},data:function(){return{tabs:[{value:"all",label:"全部优惠"},{value:"process",label:"审核中"},{value:"pass",label:"审核通过"},{value:"fail",label:"审核失败"}],tab:"",prompt:!1,activityList:[],categoryId:null,categoryName:"",isFilter:!1,isQuery:!1}},computed:h(h({},Object(o.c)("activity",["activityCategory","activityListById","userActivityByStatus"])),{},{res:function(){var t;switch(this.tab){case"all":t=this.isFilter?this.activityListById(this.categoryId):this.activityListById();break;case"process":t=this.userActivityByStatus(1);break;case"pass":t=this.userActivityByStatus(2);break;case"fail":t=this.userActivityByStatus(3)}return document.querySelector(".event")&&(document.querySelector(".event").scrollTop=0),t}}),watch:{tab:function(t){switch(t){case"all":this.isFilter||(this.categoryId=null,this.categoryName="");break;case"process":case"pass":case"fail":this.isFilter=!1}this.isQuery&&(this.isQuery=!1,this.$router.replace("/event"))}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$on("hideMessage",(function(content){"活動已登入"===content&&t.$router.push("/event/detail")})),e.next=3,t.getActivityList();case 3:t.getUserActivity({activityId:0});case 4:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this.$route.query,e=t.activityId,r=t.applyStatus;if(e&&r)switch(this.isQuery=!0,r){case"1":this.$refs.tabs.itemClick("process");break;case"2":this.$refs.tabs.itemClick("pass");break;case"3":this.$refs.tabs.itemClick("fail")}},beforeDestroy:function(){this.$nuxt.$off("hideMessage")},methods:h(h(h({},Object(o.b)("message",["showMessage"])),Object(o.b)("activity",["getActivityList","getUserActivity"])),{},{checkifLogged:function(t){this.$router.push("/event/detail/".concat(t))},Logged:function(){this.showMessage({content:"活動已登入"})},NotReached:function(){this.showMessage({content:"您暂未达成申请条件,请达条件后再行申请,谢谢"})},filterChange:function(t,e){this.isFilter=!0,this.$refs.tabs.itemClick("all"),this.categoryId=t,this.categoryName=e,this.prompt=!1},clickAll:function(){this.isFilter=!1,this.$refs.tabs.itemClick("all"),this.prompt=!1}})},m=Object(d.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-container"},[r("app-header",{attrs:{title:"优惠活动","filter-enable":"all"===t.tab,prompt:t.prompt,"back-enable":!0,"header-class":"header_gary"},on:{"update:prompt":function(e){t.prompt=e}}},[r("template",{slot:"suffix"},[r("tab-select",{ref:"tabs",staticClass:"events-tab",attrs:{items:t.tabs,target:t.tab,default:"all"},on:{"update:target":function(e){t.tab=e}}})],1)],2),t._v(" "),t.res?r("main",{staticClass:"event"},["all"===t.tab&&t.categoryId>0?r("div",{staticClass:"filter_event"},[t._v("筛选结果:"+t._s(t.categoryName))]):t._e(),t._v(" "),0===t.res.length?r("div",{staticClass:"nodata"},[r("span"),t._v("\n      您尚未申请任何活动\n    ")]):r("ul",{staticClass:"events_list"},["all"===t.tab?t._l(t.res,(function(e){return r("li",{key:t.tab+"_"+e.activityId,attrs:{id:t.tab+"_"+e.activityId},on:{click:function(r){return t.checkifLogged(e.activityId)}}},[r("div",{staticClass:"events_category"},[t._v(t._s(e.categoryName))]),t._v(" "),r("div",{staticClass:"events_pic"},[-1===e.mobileBanner.lastIndexOf("mp4")?[r("img",{attrs:{src:e.mobileBanner}})]:[r("video",{attrs:{id:"video_"+e.activityId,src:e.mobileBanner,autoplay:"",loop:"",playsinline:"",preload:"auto",muted:"muted"},domProps:{muted:!0}})],t._v(" "),t._m(0,!0)],2)])})):t._l(t.res,(function(e){return r("apply-list",{key:t.tab+"_"+e.activityId,attrs:{id:t.tab+"_"+e.activityId,activity:e,"apply-status":t.tab}})}))],2)]):t._e(),t._v(" "),r("div",{staticClass:"prompt",class:{active:!0===t.prompt}},[r("a",{staticClass:"close_prompt",on:{click:function(e){t.prompt=!1}}}),t._v(" "),r("div",{staticClass:"category_panel"},[!0===t.prompt?r("div",{staticClass:"select_list show",attrs:{id:"category"}},[r("button",{on:{click:t.clickAll}},[t._v("全部优惠")]),t._v(" "),t._l(t.activityCategory,(function(e){return r("button",{key:e.categoryId,on:{click:function(r){return t.filterChange(e.categoryId,e.categoryName)}}},[t._v("\n          "+t._s(e.categoryName)+"\n        ")])}))],2):t._e()])])],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"apply_btn"},[r("span",[t._v("查看详情 >>")])])}],!1,null,null,null);e.default=m.exports}}]);